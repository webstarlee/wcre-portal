<!DOCTYPE html>
<html>
  <head>
    <title>Admin Portal - Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="/static/icons/cropped_logo.png" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='css/dashboard.css') }}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='css/sidebar.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/icons.css') }}"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300&display=swap"
      rel="stylesheet"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script
      src="https://kit.fontawesome.com/f53ea1a836.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <button
      type="button"
      class="z-3 d-block d-sm-none navbar-toggler position-absolute top-0 end-0 pr-2 pt-2"
      data-bs-toggle="collapse"
      data-bs-target="#collapseSidebar"
      aria-expanded="false"
      aria-controls="collapseSidebar"
      onclick="document.getElementById('mainCol').classList.toggle('d-none')"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        class="bi"
        fill="currentColor"
        viewBox="0 0 16 16"
      >
        <path
          fill-rule="evenodd"
          d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"
        ></path>
      </svg>
    </button>
    <div class="container-fluid pe-4">
      {% include 'sidebar.html' %}
      <div class="d-flex justify-content-end" id="mainCol">
        <div class="card-wrapper">
          <h2 class="greeting" style="margin-top: 30px">{{ greeting_msg }}</h2>
          <div class="row w-100 justify-content-start mt-4 g-4">
            <div class="col-12 col-md-6 col-lg-6 col-xl-3">
              <div class="card">
                <div class="card-body card-body d-flex justify-content-between">
                  <div>
                    <h5 class="card-title text-secondary fs-6">
                      Total Listings
                    </h5>
                    <p class="card-text fs-5 fw-bold">
                      <span class="card-number">{{ total_listings }}</span>
                      Properties
                    </p>
                  </div>
                  <div>
                    <a
                      href="/listings"
                      class="btn rounded-circle px-2 border-0 listing-btn-style"
                    >
                      <i class="fas fa-eye text-white"></i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-6 col-xl-3">
              <div class="card">
                <div class="card-body d-flex justify-content-between">
                  <div>
                    <h5 class="card-title text-secondary fs-6">Total Sales</h5>
                    <p class="card-text fs-5 fw-bold">
                      <span class="card-number">{{ total_sales }}</span> Sales
                    </p>
                  </div>
                  <div>
                    <a
                      href="/sales"
                      class="btn px-2 border-0 sales-btn-style rounded-circle"
                    >
                      <i class="fas fa-eye text-white"></i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-6 col-xl-3">
              <div class="card">
                <div class="card-body d-flex justify-content-between">
                  <div>
                    <h5 class="card-title text-secondary fs-6">Total Leases</h5>
                    <p class="card-text fs-5 fw-bold">
                      <span class="card-number">75</span> Leases
                    </p>
                  </div>
                  <div>
                    <a
                      href="/leases"
                      class="btn leases-btn-style rounded-circle border-0 px-2"
                      ><i class="fas fa-eye text-white"></i
                    ></a>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-6 col-xl-3">
              <div class="card">
                <div class="card-body d-flex justify-content-between">
                  <div>
                    <h5 class="card-title text-secondary fs-6">
                      Total Documents
                    </h5>
                    <p class="card-text fs-5 fw-bold">
                      <span class="card-number">{{ total_documents }}</span>
                      Documents
                    </p>
                  </div>
                  <div>
                    <a
                      href="/documents"
                      class="btn documents-btn-style rounded-circle border-0 px-2"
                    >
                      <i class="fas fa-eye text-white"></i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row w-100 mt-2 justify-content-start g-4">
            <div class="col-12 col-lg-12 col-xl-8 d-flex">
              <div class="card flex-fill">
                <div class="card-body">
                  <h5 class="card-title">Sales Overview</h5>
                  <div class="w-full">
                    <canvas id="salesChart" style="height: 380px"></canvas>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-lg-12 col-xl-4 d-flex">
              <div class="card flex-fill">
                <div class="card-body">
                  <h5 class="card-title">Listing Overview</h5>
                  <div style="height: 380px">
                    <canvas id="listingChart"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
<script>
  const ctx = document.getElementById("salesChart").getContext("2d");
  const ctx2 = document.getElementById("listingChart").getContext("2d");
  var gradient = ctx.createLinearGradient(0, 0, 0, 400);
  gradient.addColorStop(0, "rgb(68, 166, 218,0.9)");
  gradient.addColorStop(0.7, "rgb(255, 255, 255,0.1)");
  new Chart(ctx, {
    type: "line",
    data: {
      labels: ["Jan", "Feb", "March", "April", "May", "June", "July", "August"],
      datasets: [
        {
          data: [3, 5, 4, 10, 6, 13, 8, 14],
          borderWidth: 1,
          borderColor: "#4AC9DF",
          borderWidth: 2,
          tension: 0.5,
          pointRadius: 0,
          fill: true,
          backgroundColor: gradient,
        },
      ],
    },
    options: {
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: true,
        },
        x: {
          grid: {
            display: false,
          },
        },
      },
      plugins: {
        legend: {
          display: false,
        },
      },
    },
  });

  var chartEl = document.getElementById("listingChart");
  chartEl.height = "300px";
  new Chart(ctx2, {
    type: "bar",
    data: {
      labels: ["Jan", "Feb", "March", "April", "May"],
      datasets: [
        {
          data: [2.4, 5, 6, 7.2, 6.7],
          backgroundColor: "#FF2E93",
          barThickness: 8,
          maxBarThickness: 8,
          minBarLength: 2,
          tension: 0.5,
        },
        {
          data: [1, 2, 4, 9.6, 8.5],
          backgroundColor: "#232BCD",
          barThickness: 8,
          tension: 0.5,
        },
      ],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: true,
        },
        x: {
          grid: {
            display: false,
          },
        },
      },
      plugins: {
        legend: {
          display: false,
        },
      },
    },
  });
</script>
